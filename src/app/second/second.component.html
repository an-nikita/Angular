
<div class="container mt-4">
  
  <h4>Reactive Form</h4>
  <form [formGroup]="form" >

    <div class="form-group row">
      <div class="col-sm-6">
          <label>Company Name:</label>
          <input formControlName="companyName"  style="width: 30%;">
          <div *ngIf="form.get('companyName')?.invalid && form.get('companyName')?.touched">
              Company name is required.
          </div>

      </div>

      <div class="col-sm-6">
          <label>Country:</label>
          <input formControlName="country"  style="width: 30%;">
          <div *ngIf="form.get('country')?.invalid && form.get('country')?.touched">
              Country is required.
          </div>
      </div>
    </div>


    
    <div class="input-field">
      <label>Street:</label>
      <input formControlName="street"  size="30">
      <div *ngIf="form.get('street')?.invalid && form.get('street')?.touched">
          Street is required.
      </div>

      <label>City:</label>
      <input formControlName="city"  size="30">
      <div *ngIf="form.get('city')?.invalid && form.get('city')?.touched">
          City is required.
      </div>

      <label>Pincode:</label>
      <input formControlName="pincode"  size="30">
      <div *ngIf="form.get('pincode')?.invalid && form.get('pincode')?.touched">
          Pincode is required and must be 4 digits.
      </div>
  </div>



  <div class="form-field">
      <div formArrayName="units">
          <div *ngFor="let unit of units.controls; let i = index" [formGroupName]="i">
              <label>Unit Name:</label>
              <input formControlName="unitName" >

              <label>Quantity:</label>
              <input formControlName="quantity"  type="number">

              <label>Unit Price:</label>
              <input formControlName="unitPrice"  type="number">

              <label>Total Price:</label>
              <input formControlName="totalPrice"  type="number">

              <button type="button" (click)="removeUnit(i)">Remove Unit</button>

              <div *ngIf="unit.get('unitName')?.invalid && unit.get('unitName')?.touched">
                  Unit name is required.
              </div>
              <div *ngIf="unit.get('quantity')?.invalid && unit.get('quantity')?.touched">
                  Quantity is required and must be at least 1.
              </div>
              <div *ngIf="unit.get('unitPrice')?.invalid && unit.get('unitPrice')?.touched">
                  Unit price is required and must be at least 0.
              </div>
          </div>
      <div class="col-sm-4">
      <button type="button" (click)="addUnit()">+ Add new unit</button>
     </div>
    </div>

    <button type="submit" (click)="onSubmit()">Submit</button>
    

</div>




<h4 >Submitted Data</h4>
 

      <table border="1">
        <tr>
          <th>Company Name</th>
          <th>Country</th>
          <th>Street</th>
          <th>City</th>
          <th>PIncode</th>
          <th>Unit Name</th>
          <th>Quantity</th>
          <th>Total Price</th>
          <th>UnitPrice</th>
          <th>Action</th>    
        </tr>
        <tr *ngFor="let data of submittedData; let i=index">
          <td>{{ data.companyName }}</td>
          <td>{{ data.country }}</td>
          <td>{{ data.street }}</td>
          <td>{{ data.city }}</td>
          <td>{{ data.pincode }}</td>
          <td>
            <ul>
              <li *ngFor="let data of data.units">{{ data.unitName }}</li>
              
            </ul>
          </td>
          <td>
            <ul>
              <li *ngFor="let data of data.units">{{ data. quantity}}</li>
              
            </ul>
          </td>
          <td>
            <ul>
              <li *ngFor="let data of data.units">{{ data.unitPrice}}</li>
              
            </ul>
          </td>
          <td>
            <ul>  
              <li *ngFor="let data of data.units">{{ data.totalPrice }}</li>
            </ul>
          </td>
          <td><button (click)=" editEntry(i)" >EDIT</button>
          <button (click)="deleteEntry(i)">DELETE</button> </td>  

        </tr>
      </table>
   


<!-- 
<h4 >Submitted Data</h4>
 
<table border="1">
  <tr>
    <th>Company Name</th>
    <th>Country</th>
    <th>Street</th>
    <th>City</th>
    <th>Pincode</th>
    <th>Units</th>
    <th>Actions</th>
  </tr>
  <tr *ngFor="let data of submittedData; let i = index">
    <td>{{ data.companyName }}</td>
    <td>{{ data.country }}</td>
    <td>{{ data.street }}</td>
    <td>{{ data.city }}</td>
    <td>{{ data.pincode }}</td>
    <td>
      <ul>
        <li *ngFor="let unit of data.units">
          {{ unit.unitName }} - Qty: {{ unit.quantity }}, Price: ${{ unit.unitPrice }}, Total: ${{ unit.totalPrice }}
        </li>
      </ul>
    </td>
    <td>
      <button (click)="editEntry(i)">Edit</button>
      <button (click)="deleteEntry(i)">Delete</button>
    </td>
  </tr>
</table> -->
